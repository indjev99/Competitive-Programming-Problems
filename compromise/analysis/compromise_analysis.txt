Оценката на Крускал е монотонно намаляваща с разширяването на сегмента.
За всяко ребро го фиксираме като това с най-дълъг строеж и вземаме максималния сегмент, в който това е така.
Като заявка търсим броя компоненти на графа с пътищата в този сегмент.
За частични точки можем да използваме алгоритъм на Мо.
За пълни - заявките формират двоично дърво.
Обхождаме дървото с DFS и поддържаме една DSU структура, която надграждаме и ресетваме.
Използваме "small to large" - всяко ребро ще бъде добавено не повече от log пъти.

Автори: Емил Инджев, Енчо Мишинев
